# 소프트웨어 아키텍처 검증 방법

## 🎯 아키텍처 검증의 목적

아키텍처 검증은 **설계된 아키텍처가 요구사항을 만족**하고, **품질 속성을 달성**할 수 있는지를 **구현 이전에 평가**하는 과정

### 💡 왜 검증이 필요한가?
- **비용 절감**: 구현 후 수정보다 설계 단계 수정이 10배 저렴
- **위험 완화**: 아키텍처 결함으로 인한 프로젝트 실패 방지
- **품질 보장**: 비기능적 요구사항 달성 가능성 사전 확인
- **의사소통**: 이해관계자 간 아키텍처 이해도 향상

---

## 🔍 주요 아키텍처 검증 방법

### 📊 검증 방법 분류

| 검증 방법 | 목적 | 시점 | 비용 | 정확도 |
|-----------|------|------|------|--------|
| **ATAM** | 품질속성 트레이드오프 분석 | 설계 완료 후 | 높음 | 높음 |
| **ARID** | 설계 완전성 검토 | 설계 중간 | 중간 | 중간 |
| **CBAM** | 비용-효과 분석 | 설계 완료 후 | 높음 | 높음 |
| **시나리오 분석** | 사용 시나리오 검증 | 설계 중 | 낮음 | 중간 |
| **프로토타이핑** | 핵심 기능 검증 | 설계 후 | 중간 | 높음 |
| **시뮬레이션** | 성능 예측 | 설계 완료 후 | 중간 | 중간 |

---

## 🏛️ ATAM (Architecture Tradeoff Analysis Method)

### 🎯 개요
**CMU SEI**에서 개발한 가장 널리 사용되는 아키텍처 평가 방법으로, **품질 속성 간의 트레이드오프**를 체계적으로 분석

### 📋 ATAM 4단계 프로세스
```
1단계: 준비
  └ (1) 비즈니스 동인(목표) 파악
  └ (2) 아키텍처 개요 제시

2단계: 조사
  └ (3) 아키텍처 뷰 설명
  └ (4) 품질속성 시나리오 도출
  └ (5) 아키텍처 접근 방식 식별

3단계: 분석
  └ (6) 시나리오 기반 분석 (성능, 보안 등)
  └ (7) 민감점, 트레이드오프, 위험 요소 식별

4단계: 결과 정리
  └ (8) 분석 결과 정리
  └ (9) 이해관계자와 공유
```
📌 ATAM 단계별 설명 + 예시

| 단계                      | 활동                          | 설명                     | 예시                             |
| ----------------------- | --------------------------- | ---------------------- | ------------------------------ |
| **1. 비즈니스 동인 식별**       | 프로젝트의 목표, 제약조건, 성공 기준 확인    | 아키텍처가 왜 필요한지 정의        | “전자상거래 플랫폼 확장: 성능·보안·가용성이 핵심”  |
| **2. 아키텍처 개요 제시**       | 아키텍트가 시스템 구조, 주요 컴포넌트 설명    | C4 모델, 4+1 뷰로 설명       | “인증 서비스, 주문 서비스, 결제 서비스 구조”    |
| **3. 아키텍처 뷰 설명**        | 주요 컴포넌트 관계, 데이터 흐름, 배포 뷰 설명 | 런타임/배포 다이어그램           | “웹서버–API 게이트웨이–서비스 계층–DB”      |
| **4. 품질속성 시나리오 도출**     | 이해관계자와 함께 시나리오 정의           | 성능, 보안, 가용성 시나리오       | “1000명 동시 로그인 시 95% 요청이 2초 이내” |
| **5. 아키텍처 접근 방식 식별**    | 품질속성 달성 위한 설계 기법 확인         | 캐싱, 부하분산, 샤딩, 보안 인증 적용 | “로드밸런서 + 세션 클러스터링”             |
| **6. 시나리오 기반 분석**       | 각 시나리오를 아키텍처에 대입하여 대응 여부 평가 | 아키텍처 대응 가능/불가          | “DB 단일 장애 시 Failover 없음 → 위험”  |
| **7. 민감점/트레이드오프/위험 식별** | 아키텍처 의사결정의 영향 분석            | 성능 vs 보안, 가용성 vs 비용    | “암호화 강화 → 성능 저하 위험”            |
| **8. 결과 정리**            | 주요 발견사항 기록                  | 위험 리스트, 개선점            | “Failover 필요, 성능 튜닝 필요”        |
| **9. 공유 및 의사결정**        | 이해관계자에게 결과 설명 및 합의          | 문서화 & 리포트 제공           | “로드밸런싱 추가 및 DB 이중화 채택”         |



#### 🔸 Phase 1: 프레젠테이션 단계
```yaml
목적: 아키텍처와 비즈니스 목표 이해

활동:
1. 비즈니스 드라이버 발표
   - 프로젝트 배경과 목표
   - 주요 기능적 요구사항
   - 제약사항과 가정

2. 아키텍처 발표  
   - 아키텍처 개요와 핵심 결정
   - 주요 컴포넌트와 관계
   - 기술 스택과 패턴

3. 아키텍처 접근법 식별
   - 품질 속성별 아키텍처 전략
   - 패턴과 전술 사용 현황

참여자: 
- 평가팀 (3-5명)
- 아키텍트와 개발팀
- 프로젝트 관리자
```

#### 🔸 Phase 2: 조사와 분석 단계
```yaml
목적: 아키텍처 접근법 상세 분석

활동:
1. 품질 속성 시나리오 생성
   - 성능, 보안, 가용성 등
   - 측정 가능한 구체적 시나리오
   - 우선순위 설정

2. 아키텍처 접근법 분석
   - 각 시나리오별 아키텍처 동작 추적
   - 품질 속성 달성 가능성 평가
   - 잠재적 문제점 식별

3. 민감점(Sensitivity Points) 식별
   - 품질 속성에 큰 영향을 미치는 아키텍처 결정
   - 변경 시 전체 시스템에 파급효과

4. 트레이드오프 점(Tradeoff Points) 식별
   - 한 품질 속성 향상이 다른 속성에 부정적 영향
   - 상충 관계 명확화

참여자: 평가팀 + 개발팀
```

#### 🔸 Phase 3: 테스팅 단계
```yaml
목적: 더 많은 이해관계자 참여한 검증

활동:
1. 시나리오 브레인스토밍
   - 모든 이해관계자 참여
   - 더 다양하고 현실적인 시나리오 도출
   - 중요도별 우선순위 재설정

2. 시나리오 재분석
   - 새로운 시나리오로 아키텍처 재검토
   - 이전 분석 결과 검증

참여자: 
- 평가팀 + 개발팀
- 최종 사용자
- 고객 대표
- 운영팀
```

#### 🔸 Phase 4: 후속 활동 단계
```yaml
목적: 평가 결과 문서화 및 후속 계획 수립

활동:
1. 결과 보고서 작성
   - 아키텍처 강점과 약점
   - 위험 요소와 민감점
   - 개선 권고사항

2. 후속 계획 수립
   - 우선순위별 개선 방안
   - 추가 검증 필요 영역
   - 모니터링 지표 설정

산출물:
- ATAM 평가 보고서
- 위험 요소 목록  
- 개선 권고사항
- 추가 분석 계획
```

### 📝 ATAM 실제 예시: 온라인 쇼핑몰

#### 1. 비즈니스 드라이버
```yaml
목표: 
- 연간 매출 100억 달성
- 동시 사용자 10,000명 지원
- 99.9% 가용성 보장

제약사항:
- 개발 기간 12개월
- 예산 50억원
- 기존 레거시 시스템 연동 필수
```

#### 2. 품질 속성 시나리오
```yaml
성능 시나리오:
- 상황: 평상시 운영 상태
- 자극: 1000명이 동시에 상품 검색
- 환경: 정상 네트워크 상태
- 아티팩트: 검색 서비스
- 응답: 검색 결과 반환
- 응답 측정: 95% 요청이 2초 이내 응답

가용성 시나리오:  
- 상황: 정상 운영 중
- 자극: 주문 서비스 장애 발생
- 환경: 피크 시간 (오후 8-9시)
- 아티팩트: 주문 처리 시스템
- 응답: 장애 감지 및 복구
- 응답 측정: 30초 이내 자동 복구
```

#### 3. 아키텍처 접근법 분석
```yaml
성능 접근법:
- 로드 밸런싱 (다중 서버)
- 데이터베이스 읽기 전용 복제본
- Redis 캐시 적용
- CDN 사용

분석 결과:
✅ 강점: 수평 확장 가능, 응답시간 단축
⚠️ 약점: 복잡성 증가, 데이터 일관성 이슈
🔥 민감점: 데이터베이스 성능이 전체 성능에 큰 영향
⚡ 트레이드오프: 성능 vs 일관성 (CAP 정리)

가용성 접근법:
- 마이크로서비스 아키텍처
- Circuit Breaker 패턴
- Health Check 및 Auto Scaling
- 무중단 배포

분석 결과:
✅ 강점: 부분 장애 격리, 빠른 복구
⚠️ 약점: 분산 시스템 복잡성, 네트워크 지연
🔥 민감점: 서비스 간 의존성 설계
⚡ 트레이드오프: 가용성 vs 데이터 일관성
```

#### 4. 위험 요소와 개선 방안
```yaml
높은 위험:
- 데이터베이스 병목: 샤딩 또는 NoSQL 검토
- 서비스 간 의존성: API Gateway 패턴 적용
- 데이터 일관성: Saga 패턴 도입

중간 위험:
- 캐시 무효화: 캐시 전략 재검토
- 모니터링 부족: APM 도구 도입

낮은 위험:  
- 보안 취약점: 정기 보안 감사 실시
```

---

## 🔄 ARID (Active Reviews for Intermediate Designs)

### 🎯 개요
**설계 중간 단계**에서 아키텍처의 **완전성과 일관성**을 검토하는 경량화된 방법입니다.

### 📋 ARID 절차

#### 1단계: 준비 (1-2일)
```yaml
활동:
- 검토 팀 구성 (3-4명)
- 아키텍처 문서 준비
- 검토 범위와 목표 설정
- 참여자 교육

산출물:
- 검토 계획서
- 참여자 역할 정의
- 체크리스트 준비
```

#### 2단계: 검토 회의 (1일)
```yaml
오전 세션 (3-4시간):
- 아키텍처 프레젠테이션 (30분)
- 질의응답 (30분)
- 시나리오 워크스루 (2-3시간)

오후 세션 (2-3시간):
- 이슈 식별 및 분류
- 개선 방안 토의
- 후속 계획 수립

참여자:
- 검토팀 (외부 전문가)
- 아키텍트
- 핵심 개발자
```

#### 3단계: 후속 조치 (1주)
```yaml
활동:
- 검토 결과 정리
- 개선 계획 수립
- 이해관계자 보고
- 다음 검토 일정 계획

산출물:
- ARID 검토 보고서
- 이슈 목록
- 개선 액션 플랜
```

### 📝 ARID 체크리스트 예시
```yaml
완전성 검토:
□ 모든 기능적 요구사항이 아키텍처에 반영되었는가?
□ 비기능적 요구사항 해결 방안이 명시되었는가?
□ 외부 시스템과의 인터페이스가 정의되었는가?
□ 데이터 모델과 플로우가 완전한가?

일관성 검토:
□ 아키텍처 뷰 간 일치하는가?
□ 명명 규칙이 일관되게 적용되었는가?
□ 설계 원칙이 전체적으로 준수되었는가?
□ 기술 스택 선택이 일관성 있는가?

실현가능성 검토:
□ 기술적으로 구현 가능한가?
□ 성능 요구사항 달성 가능한가?
□ 예산과 일정 내 개발 가능한가?
□ 팀의 기술 역량으로 구현 가능한가?
```

---

## 💰 CBAM (Cost Benefit Analysis Method)

### 🎯 개요
아키텍처 개선 방안의 **비용 대비 효과**를 정량적으로 분석하여 **우선순위를 결정**하는 방법입니다.

### 📊 CBAM 절차

#### 1단계: 비즈니스 목표 및 시나리오 수집
```yaml
활동:
- 이해관계자별 비즈니스 목표 식별
- 품질 속성 시나리오 정의
- 각 시나리오의 비즈니스 가치 평가

예시:
시나리오: "응답시간 3초 → 1초 개선"
비즈니스 가치: 
- 사용자 만족도 20% 향상
- 매출 5% 증가 (연간 5억원)
- 고객 이탈률 10% 감소
```

#### 2단계: 아키텍처 전략 도출
```yaml
활동:
- 각 시나리오별 개선 방안 도출
- 구현 비용 산정
- 구현 일정 추정

예시:
개선 방안: "캐시 시스템 도입"
구현 비용:
- 개발 비용: 2억원 (3개월)
- 인프라 비용: 연간 5천만원
- 운영 비용: 연간 1억원
```

#### 3단계: 비용-효과 분석
```yaml
계산 공식:
ROI = (비즈니스 가치 - 총 비용) / 총 비용 × 100

예시 계산:
- 연간 비즈니스 가치: 5억원
- 3년 총 비용: 6.5억원 (개발 2억 + 운영 4.5억)
- 3년 총 가치: 15억원
- ROI = (15억 - 6.5억) / 6.5억 × 100 = 131%

우선순위 결정:
1. 캐시 시스템 (ROI 131%)
2. 데이터베이스 최적화 (ROI 89%)
3. CDN 도입 (ROI 65%)
```

#### 4단계: 의사결정 및 실행 계획
```yaml
활동:
- ROI 기반 우선순위 확정
- 단계별 실행 계획 수립
- 예산 배정 및 일정 계획
- 성과 측정 지표 설정

실행 계획:
1단계 (3개월): 캐시 시스템 구축
2단계 (6개월): 데이터베이스 최적화
3단계 (9개월): CDN 도입 검토
```

---

## 📝 시나리오 기반 검증

### 🎯 개요
실제 **사용자 시나리오**를 통해 아키텍처가 **실세계 요구사항**을 만족하는지 검증하는 방법입니다.

### 📋 시나리오 종류

#### 🔸 사용 시나리오 (Use Case Scenarios)
```yaml
목적: 기능적 요구사항 검증

예시: "고객 주문 처리"
1. 고객이 웹사이트 접속
2. 상품 검색 및 선택  
3. 장바구니 담기
4. 주문 정보 입력
5. 결제 진행
6. 주문 완료 확인

검증 포인트:
- 각 단계별 시스템 응답
- 데이터 흐름의 정확성
- 예외 상황 처리
- 사용자 경험 적절성
```

#### 🔸 성장 시나리오 (Growth Scenarios)
```yaml
목적: 확장성 요구사항 검증

예시: "사용자 10배 증가"
현재: 1,000명 → 미래: 10,000명

검증 내용:
- 서버 용량 확장 방안
- 데이터베이스 성능 한계
- 네트워크 대역폭 요구사항
- 비용 증가 분석

결과:
✅ 수평 확장 가능 (auto-scaling)
⚠️ 데이터베이스 샤딩 필요
❌ 현재 아키텍처로 불가능한 영역
```

#### 🔸 탐색적 시나리오 (Exploratory Scenarios)
```yaml
목적: 예상치 못한 상황 대응 능력 검증

예시: "경쟁사 대응 긴급 기능 추가"
상황: 2주 내 새로운 결제 방식 추가 필요

검증 내용:
- 아키텍처 유연성
- 확장점(Extension Point) 존재
- 기존 시스템 영향도
- 개발 및 배포 소요 시간

결과: 
✅ Plugin 패턴으로 2주 내 가능
⚠️ 테스트 기간 추가 필요 (1주)
```

---

## 🔬 프로토타이핑 검증

### 🎯 개요
아키텍처의 **핵심 부분**을 실제 구현하여 **기술적 실현 가능성**과 **성능**을 검증하는 방법입니다.

### 📋 프로토타입 유형

#### 🔸 개념 증명 (Proof of Concept)
```yaml
목적: 기술적 실현 가능성 검증
범위: 핵심 기능 1-2개
기간: 1-2주
인력: 1-2명

예시: "마이크로서비스 간 통신"
구현 내용:
- 주문 서비스 ↔ 결제 서비스 통신
- REST API vs gRPC 성능 비교
- 서킷 브레이커 패턴 적용 테스트

검증 결과:
- gRPC가 REST보다 20% 빠름
- 서킷 브레이커 정상 동작 확인
- 네트워크 지연 시 적절한 타임아웃 설정
```

#### 🔸 성능 프로토타입 (Performance Prototype)
```yaml
목적: 성능 요구사항 달성 가능성 검증
범위: 성능 중요 구간
기간: 2-4주  
인력: 2-3명

예시: "대용량 검색 시스템"
구현 내용:
- Elasticsearch 클러스터 구성
- 100만 건 데이터 색인
- 동시 1000명 검색 부하 테스트

성능 측정:
- 평균 응답시간: 150ms (목표: 200ms) ✅
- 95% 응답시간: 350ms (목표: 500ms) ✅  
- TPS: 1200 (목표: 1000) ✅
- 메모리 사용량: 4GB (예산: 8GB) ✅
```

#### 🔸 아키텍처 프로토타입 (Architectural Prototype)
```yaml
목적: 전체 아키텍처 구조 검증
범위: 주요 컴포넌트 간 연동
기간: 4-8주
인력: 5-8명

예시: "마이크로서비스 기반 쇼핑몰"
구현 내용:
- API Gateway + 3개 마이크로서비스
- 데이터베이스 분리 (서비스별 DB)
- 메시지 큐를 통한 비동기 통신
- 모니터링 및 로깅 시스템

검증 결과:
✅ 서비스 간 독립적 배포 가능
✅ 장애 격리 효과 확인
⚠️ 분산 트랜잭션 복잡성 예상보다 높음
❌ 초기 개발 복잡도로 인한 일정 지연 예상
```

---

## 🎮 시뮬레이션 검증

### 🎯 개요
**수학적 모델**이나 **시뮬레이션 도구**를 사용하여 시스템의 **성능과 동작**을 예측하는 방법입니다.

### 📊 시뮬레이션 유형

#### 🔸 성능 시뮬레이션
```yaml
도구: JMeter, LoadRunner, Gatling
목적: 부하 상황에서의 성능 예측

시나리오:
- 정상 부하: 초당 100 요청
- 피크 부하: 초당 1000 요청  
- 스트레스 부하: 초당 2000 요청

측정 지표:
- 응답시간 분포
- 처리량 (TPS)
- 에러율
- 자원 사용률 (CPU, 메모리)

결과 분석:
"1000 TPS까지는 안정적 처리
1500 TPS 초과 시 응답시간 급격히 증가
2000 TPS에서 에러율 5% 발생"
```

#### 🔸 가용성 시뮬레이션
```yaml
도구: Chaos Monkey, Gremlin
목적: 장애 상황에서의 시스템 복원력 검증

장애 시나리오:
- 서버 장애 (랜덤 인스턴스 종료)
- 네트워크 지연/단절
- 데이터베이스 응답 지연
- 메모리 부족 상황

측정 지표:
- 장애 감지 시간
- 복구 시간 (MTTR)  
- 서비스 영향도
- 사용자 경험 저하 정도

결과:
"서버 1대 장애 시 15초 내 자동 복구
데이터베이스 지연 시 캐시로 90% 요청 처리"
```

---

## 📏 메트릭 기반 평가

### 🎯 개요
**정량적 지표**를 사용하여 아키텍처의 품질을 객관적으로 측정하고 평가하는 방법입니다.

### 📊 주요 메트릭 카테고리

#### 🔸 복잡도 메트릭
```yaml
컴포넌트 복잡도:
- 사이클로매틱 복잡도 (CC)
- 라인 수 (LOC)  
- 함수점 (Function Point)

아키텍처 복잡도:
- 컴포넌트 간 의존성 수
- 레이어 간 호출 깊이
- 인터페이스 수

예시:
"주문 서비스 CC: 15 (허용: 10 이하) ❌
컴포넌트 간 의존성: 25개 (권장: 20개 이하) ⚠️
→ 리팩토링 필요"
```

#### 🔸 결합도/응집도 메트릭
```yaml
결합도 측정:
- 입력 결합도 (fan-in)
- 출력 결합도 (fan-out)
- 데이터 결합도 비율

응집도 측정:
- 기능적 응집도
- 순차적 응집도
- 논리적 응집도

목표 값:
- Fan-out < 7 (높은 결합도 위험)
- 기능적 응집도 > 80%
- 데이터 결합도 비율 > 60%
```

#### 🔸 품질 메트릭
```yaml
신뢰성:
- MTBF (평균 고장 간격)
- MTTR (평균 복구 시간)  
- 가용성 = MTBF / (MTBF + MTTR)

성능:
- 평균 응답시간
- 95% 응답시간
- 처리량 (TPS)

보안:
- 취약점 수
- 보안 테스트 커버리지
- 인증/인가 적용률
```

---

## 🎯 시험 출제 포인트

### 📚 이론 문제

#### 1. 검증 방법별 특징과 차이점
```
Q: ATAM과 ARID의 주요 차이점은?
답: 
- ATAM: 설계 완료 후, 품질 속성 트레이드오프 중심
- ARID: 설계 중간 단계, 완전성과 일관성 중심

Q: CBAM의 핵심 목적은?
답: 아키텍처 개선 방안의 비용 대비 효과를 
    정량적으로 분석하여 우선순위 결정
```

#### 2. ATAM 4단계 프로세스
```
Q: ATAM의 4단계를 순서대로 나열하고 각 단계의 목적을 설명하시오.
답:
1. 프레젠테이션: 아키텍처와 비즈니스 목표 이해  
2. 조사와 분석: 아키텍처 접근법 상세 분석
3. 테스팅: 더 많은 이해관계자 참여한 검증
4. 후속 활동: 평가 결과 문서화 및 후속 계획
```

#### 3. 민감점과 트레이드오프 점
```
Q: ATAM에서 민감점과 트레이드오프 점의 차이는?
답:
- 민감점: 품질 속성에 큰 영향을 미치는 아키텍처 결정
- 트레이드오프 점: 한 품질 속성 향상이 다른 속성에 부정적 영향
```

### 📊 실무 문제

#### 1. 검증 방법 선택
```
Q: 다음 상황에서 적절한 검증 방법을 선택하시오.
"신규 시스템 개발 중 설계 단계에서 성능 요구사항 달성 가능성을 빠르게 확인하고 싶다"
답: 성능 프로토타이핑 또는 성능 시뮬레이션
```

#### 2. 시나리오 작성
```
Q: 온라인 뱅킹 시스템의 보안 관련 품질 속성 시나리오를 작성하시오.
답:
- 상황: 정상 운영 중
- 자극: 해킹 시도 (SQL Injection)
- 환경: 인터넷 환경
- 아티팩트: 로그인 시스템
- 응답: 공격 차단 및 로깅
- 응답 측정: 99.9% 공격 차단, 1초 이내 감지
```

#### 3. ROI 계산
```
Q: 캐시 시스템 도입의 ROI를 계산하시오.
- 구축 비용: 1억원
- 연간 운영비: 2천만원  
- 연간 비즈니스 가치: 5천만원
- 분석 기간: 3년

답: ROI = (1.5억 - 1.6억) / 1.6억 × 100 = -6.25%
    → 투자 부적절
```

### 💡 시험 대비 핵심 암기사항

```yaml
ATAM 4단계: 프레젠테이션 → 조사분석 → 테스팅 → 후속활동
ARID 특징: 경량화, 설계 중간 단계, 1일 검토
CBAM 공식: ROI = (비즈니스가치 - 총비용) / 총비용 × 100

검증 시점:
- 설계 중: ARID, 시나리오 분석
- 설계 완료 후: ATAM, CBAM, 프로토타이핑

품질 속성 시나리오 6요소:
상황, 자극, 환경, 아티팩트, 응답, 응답측정
```

이렇게 소프트웨어 아키텍처 검증 방법을 상세하게 정리해드렸습니다. 어떤 부분을 더 깊이 있게 알고 싶으시거나, 실제 사례로 연습해보고 싶은 검증 방법이 있나요?